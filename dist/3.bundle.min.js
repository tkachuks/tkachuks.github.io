(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{2:function(e,t,n){"use strict";t.a=function e(t,n){return fetch(t,n).then((function(a){return 503!==a.status?a:new Promise((function(o){return setTimeout((function(){return o(e(t,n))}),a.headers.get("Retry-After"))}))}))}},20:function(e,t,n){"use strict";n.r(t);var a=function(e,t){for(var n=e.split(","),a=n[0].match(/:(.*?);/)[1],o=atob(n[1]),r=o.length,c=new Uint8Array(r);r--;)c[r]=o.charCodeAt(r);return new File([c],t,{type:a})},o=function(e,t){var n=new FileReader;n.onload=function(e){var n=new DataView(e.target.result),a=n.byteLength,o=2;if(65496!==n.getUint16(0,!1))return t(new Error("-2"));for(;o<a;){var r=n.getUint16(o,!1);if(o+=2,65505===r){if(1165519206!==n.getUint32(o+=2,!1))return t(new Error("-1"));var c=18761===n.getUint16(o+=6,!1);o+=n.getUint32(o+4,c);var i=n.getUint16(o,c);o+=2;for(var s=0;s<i;s++)if(274===n.getUint16(o+12*s,c))return t(n.getUint16(o+12*s+8,c))}else{if(65280!=(65280&r))break;o+=n.getUint16(o,!1)}}return t(new Error("-1"))},e&&n.readAsArrayBuffer(e)},r=n(3);n(9);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){function t(){var e,n,i,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var m=arguments.length,p=new Array(m),g=0;g<m;g++)p[g]=arguments[g];return i=this,u=(e=s(t)).call.apply(e,[this].concat(p)),n=!u||"object"!==c(u)&&"function"!=typeof u?l(i):u,f(l(n),"state",{img:config.data.photo_url?config.data.photo_url:localStorage.getItem("photo_url")}),f(l(n),"addFoto",(function(e){var t=e.target.files[0],r=new Image;if(config.plugins.some((function(e){return"highres_photos"===e}))){var c=new FileReader;c.readAsDataURL(t),c.onload=function(){n.setState({img:c.result}),config.data.photo=a(n.state.img,t.name),config.data.photo_url=c.result,config.data.photo_name=t.name,localStorage.setItem("photo_url",c.result),localStorage.setItem("photo_name",t.name)}}else o(t,(function(e){var o=new FileReader;o.readAsDataURL(t),o.onload=function(){r.src=o.result},r.onload=function(){var o=document.createElement("canvas"),c=o.getContext("2d"),i=r.width,s=r.height;switch((i>config.max_side||s>config.max_side)&&(i>s?i>config.max_side&&(s=s*config.max_side/i,i=config.max_side):s>config.max_side&&(i=i*config.max_side/s,s=config.max_side)),e>4&&e<9?(o.width=s,o.height=i):(o.width=i,o.height=s),e){case 2:c.transform(-1,0,0,1,i,0);break;case 3:c.transform(-1,0,0,-1,i,s);break;case 4:c.transform(1,0,0,-1,0,s);break;case 5:c.transform(0,1,1,0,0,0);break;case 6:c.transform(0,1,-1,0,s,0);break;case 7:c.transform(0,-1,-1,0,s,i);break;case 8:c.transform(0,-1,1,0,0,i)}c.drawImage(r,0,0,i,s);var l=o.toDataURL();n.setState({img:l}),config.data.photo_url=l,config.data.photo_name=t.name,localStorage.setItem("photo_url",l),localStorage.setItem("photo_name",t.name),config.data.photo=a(n.state.img,t.name)}}));n.refs.file_wrap.reset()})),f(l(n),"componentWillMount",(function(){n.state.img?config.data.photo=a(n.state.img,localStorage.getItem("photo_name")):n.setState({img:config.urls.media+"foto.svg"}),config.isRTL&&(document.getElementsByTagName("body")[0].style.direction="rtl")})),f(l(n),"continue",(function(){var e=JSON.parse(localStorage.getItem("query")),t=JSON.parse('{"'+decodeURI("b=".concat(e.b,"&c=").concat(e.c)).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'),a=new FormData;a.append("b",t.b),a.append("c",t.c),a.append("photo",config.data.photo),a.append("date",moment().format("YYYY-MM-DD HH:mm:ss")),Object(r.c)(a).then((function(e){201===e.status&&n.props.history.push(config.urls.baseUrl+config.urls.other_data)}))})),n}var n,m,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,React.Component),n=t,(m=[{key:"render",value:function(){var e=this;return React.createElement("div",{id:"photo"},React.createElement("div",{className:"bullets"},React.createElement("div",{className:"bullet"}),React.createElement("div",{className:"bullet active"}),React.createElement("div",{className:"bullet"}),React.createElement("div",{className:"bullet"})),React.createElement("h1",{className:"selfies"},config.translations.selfies),React.createElement("div",{className:"picture"},React.createElement("div",{className:"add-wrap"},React.createElement("div",{className:"circle",style:-1!==this.state.img.indexOf("foto.svg")?{paddingTop:"30px"}:{}},React.createElement("div",{className:-1!==this.state.img.indexOf("foto.svg")?"img":"img-sel"},React.createElement("img",{src:this.state.img}))))),React.createElement("div",{className:"buttons"},React.createElement("button",{className:"yes"},config.translations.want),React.createElement("form",{ref:"file_wrap"},React.createElement("input",{type:"file",accept:"image/*",capture:"camera",onChange:function(t){return e.addFoto(t)}})),React.createElement("h1",null,config.translations.or),React.createElement("button",{className:"not_now",onClick:function(){return e.props.history.push(config.urls.baseUrl+config.urls.other_data)}},config.translations.not_now)),React.createElement("div",{className:"btns-wrap"},React.createElement("div",{className:"btn"},React.createElement("button",{onClick:function(){return e.props.history.push(config.urls.baseUrl+config.urls.home)}},config.translations.back)),React.createElement("div",{className:"btn"},React.createElement("button",{onClick:this.continue},config.translations.continue))))}}])&&i(n.prototype,m),p&&i(n,p),t}();f(m,"propTypes",{history:PropTypes.object});t.default=m},3:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return c}));var a=n(2),o=function(e){var t=config.urls.main+config.urls.filling_up,n={mode:"cors",method:"PATCH",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e};return Object(a.a)(t,n)},r=function(e){var t=config.urls.main+config.urls.photo_r,n={mode:"cors",method:"POST",body:e};return Object(a.a)(t,n)},c=function(e){var t=config.urls.main+config.urls.notes,n={mode:"cors",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e};return Object(a.a)(t,n)}},9:function(e,t,n){}}]);