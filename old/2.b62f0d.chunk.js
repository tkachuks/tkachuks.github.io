(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[,,,,,,,,function(e,t,n){"use strict";t.a=function e(t,n){var a=[400,404,500,504];return n.headers||(n.headers={}),n.method||(n.method="GET"),n.headers["X-Requested-With"]="XMLHttpRequest",n.credentials="include",fetch(t,n).then((function(r){if(401===r.status)window.location.href=window.location.origin+config.urls.login;else{if(503===r.status)return new Promise((function(a){return setTimeout((function(){return a(e(t,n))}),1e3*r.headers.get("Retry-After"))}));if(502===r.status)return new Promise((function(a){return setTimeout((function(){return a(e(t,n))}),1e3)}));if(!a.includes(r.status))return r;window.location.href=config.urls.error_page}}))}},function(e,t,n){"use strict";var a=n(0),r=n.n(a);n(10);t.a=function(){return r.a.createElement("header",{className:"layout_header"},r.a.createElement("img",{src:config.business_logo,alt:"logo"}),r.a.createElement("h2",{className:"business_name"},config.business_name))}},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var a=n(8),r=function(e){var t=config.urls.main+config.urls.filling_up,n={mode:"cors",method:"PATCH",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e};return Object(a.a)(t,n)},o=function(e){var t=config.urls.main+config.urls.photo_r,n={mode:"cors",method:"POST",body:e};return Object(a.a)(t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),o=(n(13),function(e){var t=e.continueStep,n=e.loading;return r.a.createElement("div",{className:"continue_btn-wrap"},r.a.createElement("button",{onClick:t},n?r.a.createElement("img",{src:config.urls.media+"refresh.svg"}):config.translations.continue_btn_label))})},function(e,t,n){},,function(e,t,n){},,,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(12),i=n(9),s=n(11),c=n(8),l=function(e,t){var n=new FileReader;n.onload=function(e){var n=new DataView(e.target.result),a=n.byteLength,r=2;if(65496!==n.getUint16(0,!1))return t(new Error("-2"));for(;r<a;){var o=n.getUint16(r,!1);if(r+=2,65505===o){if(1165519206!==n.getUint32(r+=2,!1))return t(new Error("-1"));var i=18761===n.getUint16(r+=6,!1);r+=n.getUint32(r+4,i);var s=n.getUint16(r,i);r+=2;for(var c=0;c<s;c++)if(274===n.getUint16(r+12*c,i))return t(n.getUint16(r+12*c+8,i))}else{if(65280!=(65280&o))break;r+=n.getUint16(r,!1)}}return t(new Error("-1"))},e&&n.readAsArrayBuffer(e)},u=config.data.max_side||1e3;n(15);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.default=function(e){var t=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,n=Object(a.useRef)(null),d=m(Object(a.useState)(!1),2),g=d[0],f=d[1],p=m(Object(a.useState)(sessionStorage.getItem("address")||config.data.address),2),h=p[0],v=p[1],b=function(){var e;window.google||(e=config.urls.add_address,Object(c.a)(e,{method:"GET"}).then((function(e){return e.json().then((function(e){return{r:e}}))}))).then((function(e){var t=e.r.api_key;!function(e,t){var a=document.createElement("script");a.src=e,t.appendChild(a),a.onload=function(){if(window.google){var e=n.current,t=new window.google.maps.places.SearchBox(e);t&&t.addListener("places_changed",(function(){var e=t.getPlaces();v(e[0].formatted_address),sessionStorage.setItem("address",e[0].formatted_address)}))}}}("https://maps.googleapis.com/maps/api/js?key=".concat(t,"&libraries=places&language=").concat(config.locale),document.body)}))},w=m(Object(a.useState)(sessionStorage.getItem("name")||config.data.name||""),2),_=w[0],S=w[1],E=m(Object(a.useState)(!0),2),y=E[0],j=E[1],N=m(Object(a.useState)(sessionStorage.getItem("email")||config.data.email||""),2),O=N[0],I=N[1],A=m(Object(a.useState)(!0),2),k=A[0],C=A[1],U=m(Object(a.useState)(sessionStorage.getItem("photo")||""),2),R=U[0],T=U[1],x=m(Object(a.useState)(sessionStorage.getItem("photoName")||""),2),F=x[0],D=x[1],L=function(e){T(e),sessionStorage.setItem("photo",e)};Object(a.useEffect)((function(){config.address_based&&b()}),[]);var P=m(Object(a.useState)(!1),2),B=P[0],q=P[1],z=function(e,t){var n=e?e.target.files[0]:t;if(n){var a;D(n.name),sessionStorage.setItem("photoName",n.name);var r=(null===(a=config.plugins)||void 0===a?void 0:a.includes("highres_photos"))||!1;!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=new Image;l(e,(function(r){var o=new FileReader;o.readAsDataURL(e),o.onload=function(){a.src=o.result},a.onload=function(){var e=document.createElement("canvas"),o=e.getContext("2d"),i=a.width,s=a.height,c=navigator.userAgent.toLowerCase(),l=/samsungbrowser/.test(c);if(!n&&(i>u||s>u)&&(i>s?i>u&&(s=s*u/i,i=u):s>u&&(i=i*u/s,s=u)),4<r&&r<9&&c&&l?(e.width=s,e.height=i):(e.width=i,e.height=s),c&&l)switch(r){case 2:o.transform(-1,0,0,1,i,0);break;case 3:o.transform(-1,0,0,-1,i,s);break;case 4:o.transform(1,0,0,-1,0,s);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,s,0);break;case 7:o.transform(0,-1,-1,0,s,i);break;case 8:o.transform(0,-1,1,0,0,i)}o.drawImage(a,0,0,i,s);var m=n?e.toDataURL("image/jpeg",.8):e.toDataURL("image/jpeg",.6);t(m)}}))}(n,L,r)}},H=m(Object(a.useState)(!1),2),J=H[0],M=H[1],Z=function(){return M((function(e){return!e}))},G=m(Object(a.useState)(!1),2),X=G[0],V=G[1],W=function(){return V((function(e){return!e}))},Y=m(Object(a.useState)(!1),2),$=Y[0],K=Y[1],Q=function(){return K((function(e){return!e}))};return r.a.createElement("div",{id:"fill-in"},r.a.createElement(i.a,null),r.a.createElement("div",{className:"client-picture"},R?r.a.createElement("div",{className:"added_photo"+(B?" deleteAnimation":"")},r.a.createElement("img",{className:"client-img",src:R}),r.a.createElement("div",{className:"buttons"},r.a.createElement("label",{className:"control_btn"},r.a.createElement("img",{src:config.urls.media+"ic_photo.svg"}),r.a.createElement("input",{className:"file_input",type:"file",accept:"image/*",onChange:z})),r.a.createElement("div",{className:"control_btn",onClick:function(){q(!0),setTimeout((function(){q(!1),T(""),D(""),sessionStorage.removeItem("photo"),sessionStorage.removeItem("photoName")}),350)}},r.a.createElement("img",{src:config.urls.media+"ic_delete.svg"})))):r.a.createElement("label",{className:"photo-section",style:{backgroundImage:"url('".concat(config.urls.media,"pic@2x.jpg')")}},r.a.createElement("div",{className:"buttons"},r.a.createElement("div",{className:"control_btn add_button"},r.a.createElement("img",{src:config.urls.media+"ic_add_photo_plus.svg"}))),r.a.createElement("input",{className:"file_input",type:"file",accept:"image/*",onChange:z}))),r.a.createElement("div",{className:"inputs"},r.a.createElement("div",{className:"input_wrap"+(y?"":" warning")+(J?" highlightInput":"")},r.a.createElement("img",{src:config.urls.media+"ic_clients.svg"}),r.a.createElement("input",{type:"text",name:"name",placeholder:config.translations.fill_in.name_placeholder,value:_,onFocus:Z,onBlur:Z,onChange:function(e){var t=e.target.value;j(!0),S(t),sessionStorage.setItem("name",t)}})),r.a.createElement("div",{className:"input_wrap"+(k?"":" warning")+(X?" highlightInput":"")},r.a.createElement("img",{src:config.urls.media+"ic_email.svg"}),r.a.createElement("input",{type:"email",name:"email",onFocus:W,onBlur:W,placeholder:config.translations.fill_in.email_placeholder,value:O,onChange:function(e){var t=e.target.value;C(!0),I(t),sessionStorage.setItem("email",t)}})),config.address_based&&r.a.createElement("div",{className:"input_wrap"+($?" highlightInput":"")},r.a.createElement("img",{src:config.urls.media+"ic_address.svg"}),r.a.createElement("input",{id:"pac-input",className:"controls form-input",type:"text",ref:n,name:"address",autoComplete:"off",onFocus:Q,onBlur:Q,placeholder:config.translations.fill_in.adress_placeholder,value:h,onChange:function(e){var t=e.target.value;v(t),sessionStorage.setItem("address",t)}}))),r.a.createElement(o.a,{continueStep:function(){if(_&&(null==_?void 0:_.trim())&&(t.test(null==O?void 0:O.trim())||""===(null==O?void 0:O.trim())||!O)){f(!0);var n=JSON.parse(sessionStorage.getItem("fill_query")),a="b=".concat(n.b,"&c=").concat(n.c,"&name=").concat(null==_?void 0:_.trim(),"&email=").concat(O||null);config.address_based&&(a+="&address=".concat((null==h?void 0:h.trim())||null));var r=new FormData;r.append("b",n.b),r.append("c",n.c),R&&r.append("photo",function(e,t){for(var n=e.split(","),a=n[0].match(/:(.*?);/)[1],r=atob(n[1]),o=r.length,i=new Uint8Array(o);o--;)i[o]=r.charCodeAt(o);return new File([i],t,{type:a})}(R,F),F||"profile-picture.jpg"),r.append("date",(i=new Date,"".concat(i.getFullYear(),"-").concat((i.getMonth()+1).toString().padStart(2,"0"),"-").concat(i.getDate().toString().padStart(2,"0")," ").concat(i.getHours().toString().padStart(2,"0"),":").concat(i.getMinutes().toString().padStart(2,"0"),":").concat(i.getSeconds().toString().padStart(2,"0"))));var o=[Object(s.a)(a),R?Object(s.b)(r):Promise.resolve("resolved")];return Promise.all(o).then((function(){e.history.push({pathname:config.urls.baseUrl+config.urls.other_data,search:config.urls.params})})),!1}var i;(null==_?void 0:_.trim())||j(!1),O&&!t.test(null==O?void 0:O.trim())&&""!==(null==O?void 0:O.trim())&&C(!1)},loading:g}))}}]]);