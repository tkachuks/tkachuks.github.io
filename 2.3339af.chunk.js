(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{10:function(e,t,n){},12:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(9),o=n(8),s=function(e,t){var n=new FileReader;n.onload=function(e){var n=new DataView(e.target.result),a=n.byteLength,r=2;if(65496!==n.getUint16(0,!1))return t(new Error("-2"));for(;r<a;){var i=n.getUint16(r,!1);if(r+=2,65505===i){if(1165519206!==n.getUint32(r+=2,!1))return t(new Error("-1"));var o=18761===n.getUint16(r+=6,!1);r+=n.getUint32(r+4,o);var s=n.getUint16(r,o);r+=2;for(var c=0;c<s;c++)if(274===n.getUint16(r+12*c,o))return t(n.getUint16(r+12*c+8,o))}else{if(65280!=(65280&i))break;r+=n.getUint16(r,!1)}}return t(new Error("-1"))},e&&n.readAsArrayBuffer(e)};n(12);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.default=function(e){var t=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,n=Object(a.useRef)(null),l=c(Object(a.useState)(sessionStorage.getItem("address")||config.data.address),2),u=l[0],m=l[1],g=c(Object(a.useState)(sessionStorage.getItem("name")||config.data.name),2),d=g[0],f=g[1],p=c(Object(a.useState)(!0),2),h=p[0],v=p[1],b=c(Object(a.useState)(sessionStorage.getItem("email")||config.data.email),2),w=b[0],S=b[1],E=c(Object(a.useState)(!0),2),_=E[0],y=E[1],j=c(Object(a.useState)(sessionStorage.getItem("photo")||""),2),N=j[0],I=j[1],O=c(Object(a.useState)(sessionStorage.getItem("photoName")||""),2),A=O[0],U=O[1],C=function(e){I(e),sessionStorage.setItem("photo",e)},k=c(Object(a.useState)(!1),2),R=k[0],F=k[1],T=function(e){var t,n=e.target.files[0];U(n.name),sessionStorage.setItem("photoName",n.name);var a=(null===(t=config.plugins)||void 0===t?void 0:t.includes("highres_photos"))||!1;!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=new Image;s(e,(function(r){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){a.src=i.result},a.onload=function(){var e=document.createElement("canvas"),i=e.getContext("2d"),o=a.width,s=a.height,c=navigator.userAgent.toLowerCase(),l=/samsungbrowser/.test(c);if(4<r&&r<9&&c&&l?(e.width=s,e.height=o):(e.width=o,e.height=s),c&&l)switch(r){case 2:i.transform(-1,0,0,1,o,0);break;case 3:i.transform(-1,0,0,-1,o,s);break;case 4:i.transform(1,0,0,-1,0,s);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,s,0);break;case 7:i.transform(0,-1,-1,0,s,o);break;case 8:i.transform(0,-1,1,0,0,o)}i.drawImage(a,0,0);var u=n?e.toDataURL("image/jpeg"):e.toDataURL("image/jpeg",.7);t(u)}}))}(n,C,a)},D=c(Object(a.useState)(!1),2),L=D[0],P=D[1],x=function(){return P((function(e){return!e}))},B=c(Object(a.useState)(!1),2),q=B[0],z=B[1],H=function(){return z((function(e){return!e}))},J=c(Object(a.useState)(!1),2),M=J[0],Z=J[1],X=function(){return Z((function(e){return!e}))};return r.a.createElement("div",{id:"fill-in"},N?r.a.createElement("div",{className:"added_photo"+(R?" deleteAnimation":"")},r.a.createElement("img",{className:"client-img",src:N}),r.a.createElement("div",{className:"controls"},r.a.createElement("label",{className:"control_btn"},r.a.createElement("img",{src:config.urls.media+"ic_photo.svg"}),r.a.createElement("input",{className:"file_input",type:"file",accept:"image/*",onChange:T})),r.a.createElement("div",{className:"control_btn",onClick:function(){F(!0),setTimeout((function(){F(!1),I(""),U(""),sessionStorage.removeItem("photo"),sessionStorage.removeItem("photoName")}),350)}},r.a.createElement("img",{src:config.urls.media+"ic_delete.svg"})))):r.a.createElement("div",{className:"photo-section"},r.a.createElement("label",null,r.a.createElement("div",{className:"camera"},r.a.createElement("img",{src:config.urls.media+"ic_add_photo.svg"}),r.a.createElement("div",{className:"shine_star"},r.a.createElement("img",{src:config.urls.media+"shine_star.svg"}))),r.a.createElement("input",{className:"file_input",type:"file",accept:"image/*",onChange:T}))),r.a.createElement("div",{className:"inputs"},r.a.createElement("div",{className:"input_wrap"+(h?"":" warning")+(L?" highlightInput":"")},r.a.createElement("img",{src:config.urls.media+"ic_clients.svg"}),r.a.createElement("input",{type:"text",name:"name",placeholder:config.translations.fill_in.name_placeholder,value:d,onFocus:x,onBlur:x,onChange:function(e){var t=e.target.value;v(!0),f(t),sessionStorage.setItem("name",t)}})),r.a.createElement("div",{className:"input_wrap"+(_?"":" warning")+(q?" highlightInput":"")},r.a.createElement("img",{src:config.urls.media+"ic_email.svg"}),r.a.createElement("input",{type:"email",name:"email",onFocus:H,onBlur:H,placeholder:config.translations.fill_in.email_placeholder,value:w,onChange:function(e){var t=e.target.value;y(!0),S(t),sessionStorage.setItem("email",t)}})),config.address_based&&r.a.createElement("div",{className:"input_wrap"+(M?" highlightInput":"")},r.a.createElement("img",{src:config.urls.media+"ic_address.svg"}),r.a.createElement("input",{id:"pac-input",className:"controls form-input",type:"text",ref:n,name:"address",autoComplete:"off",onFocus:X,onBlur:X,placeholder:config.translations.fill_in.adress_placeholder,value:u,onChange:function(e){var t=e.target.value;m(t),sessionStorage.setItem("address",t)}}))),r.a.createElement(i.a,{continueStep:function(){if((null==d?void 0:d.trim())&&(t.test(null==w?void 0:w.trim())||""===(null==w?void 0:w.trim()))){var n=JSON.parse(sessionStorage.getItem("fill_query")),a="b=".concat(n.b,"&c=").concat(n.c,"&name=").concat(null==d?void 0:d.trim(),"&email=").concat(w||null);config.address_based&&(a+="&address=".concat((null==u?void 0:u.trim())||null));var r=new FormData;r.append("b",n.b),r.append("c",n.c),N&&r.append("photo",function(e,t){for(var n=e.split(","),a=n[0].match(/:(.*?);/)[1],r=atob(n[1]),i=r.length,o=new Uint8Array(i);i--;)o[i]=r.charCodeAt(i);return new File([o],t,{type:a})}(N,A),A||"profile-picture.jpg"),r.append("date",(s=new Date,"".concat(s.getFullYear(),"-").concat((s.getMonth()+1).toString().padStart(2,"0"),"-").concat(s.getDate().toString().padStart(2,"0")," ").concat(s.getHours().toString().padStart(2,"0"),":").concat(s.getMinutes().toString().padStart(2,"0"),":").concat(s.getSeconds().toString().padStart(2,"0"))));var i=[Object(o.a)(a),N?Object(o.b)(r):Promise.resolve("resolved")];return Promise.all(i).then((function(){e.history.push({pathname:config.urls.baseUrl+config.urls.other_data,search:config.urls.params})})),!1}var s;(null==d?void 0:d.trim())||v(!1),t.test(null==w?void 0:w.trim())||""===(null==w?void 0:w.trim())||y(!1)}}))}},8:function(e,t,n){"use strict";var a=function e(t,n){var a=[400,404,500,504];return n.headers||(n.headers={}),n.method||(n.method="GET"),n.headers["X-Requested-With"]="XMLHttpRequest",n.credentials="include",fetch(t,n).then((function(r){if(401===r.status)window.location.href=window.location.origin+config.urls.login;else{if(503===r.status)return new Promise((function(a){return setTimeout((function(){return a(e(t,n))}),1e3*r.headers.get("Retry-After"))}));if(502===r.status)return new Promise((function(a){return setTimeout((function(){return a(e(t,n))}),1e3)}));if(!a.includes(r.status))return r;window.location.href=config.urls.error_page}}))};n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(e){var t=config.urls.main+config.urls.filling_up;return a(t,{mode:"cors",method:"PATCH",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e})},i=function(e){var t=config.urls.main+config.urls.photo_r;return a(t,{mode:"cors",method:"POST",body:e})}},9:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n.n(a),i=(n(10),function(e){var t=e.continueStep;return r.a.createElement("div",{className:"continue_btn-wrap"},r.a.createElement("button",{onClick:t},config.translations.continue_btn_label))})}}]);