<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- <base href='/'> -->
        <meta name="viewport" content="width=device-width">
        <meta charset="UTF-8">
				<title>Calendar</title>
				<link rel="manifest" href="https://tkachuks.github.io/GitHubPage/manifest.json">
        <link href="./dist/swiper.min.css" rel="stylesheet"/>
        <link href="./dist/fullcalendar.min.css" rel="stylesheet"/>
        <link rel="apple-touch-icon" sizes="144x144" href="https://tkachuks.github.io/GitHubPage/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://tkachuks.github.io/GitHubPage/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="https://tkachuks.github.io/GitHubPage/favicon-16x16.png">
        <link rel="mask-icon" href="https://tkachuks.github.io/GitHubPage/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" content="#ffffff">
    <link href="main.bundle.min.css" rel="stylesheet"></head>
    <body>
        <script src='./components-lib/lib/moment.min.js'></script>
        <script src='./dist/jquery.min.js'></script>
        <script src='./dist/swiper.jquery.min.js'></script>
        <script src="./config.js" charset="utf-8"></script>
        <script src='./dist/fullcalendar.min.js'></script>
        <script src='./dist/hammer.min.js'></script>
        <script>
          if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
              navigator.serviceWorker.register('https://tkachuks.github.io/GitHubPage/service-worker.js').then(function(registration) {
                console.log('ServiceWorker registration successful with scope: ', registration.scope);
                const installModal = $('.installModal')
                let deferredPrompt
                window.addEventListener('beforeinstallprompt', e => {
                  e.preventDefault()
                  deferredPrompt = e
                  $('.installModal').removeClass('hiddenInstall')
                  const confirmBtn = $('#confirm-btn')
                  console.log(confirmBtn)
                  confirmBtn.addEventListener('click', e => {
                    $('.installModal').addClass('hiddenInstall')
                    deferredPrompt.prompt()
                    deferredPrompt.userChoice.then(choiceResult => {
                      if (choiceResult.outcome === 'accepted') {
                        console.log('User accepted the A2HS prompt')
                      } else {
                        console.log('User dismissed the A2HS prompt')
                      }
                      deferredPrompt = null
                    })
                  })
                })
              }, function(err) {
                console.log('ServiceWorker registration failed: ', err);
              }).catch(function(err) {
                console.log(err)
              });
            });
          } else {
            console.log('service worker is not supported');
          }
          // $(document).ready(() => {
          //   console.log($)
          //   const installModal = $('.installModal')
          //   $('.installModal').addClass("hiddenInstall")
          //   console.log('installModal', installModal)
          //   console.log('document', document.querySelector('.installModal'))
          //   let deferredPrompt
          //   window.addEventListener('beforeinstallprompt', (e) => {
          //     e.preventDefault()
          //     deferredPrompt = e
          //     $('.installModal').removeClass("hiddenInstall")
          //     const confirmBtn = $('#confirm-btn')
          //     console.log(confirmBtn)
          //     confirmBtn.addEventListener('click', (e) => {
          //       $('.installModal').addClass("hiddenInstall")
          //       deferredPrompt.prompt();
          //       deferredPrompt.userChoice.then((choiceResult) => {
          //           if (choiceResult.outcome === 'accepted') {
          //             console.log('User accepted the A2HS prompt');
          //           } else {
          //             console.log('User dismissed the A2HS prompt');
          //           }
          //           deferredPrompt = null;
          //         });
          //     });
          //   })
          // })
        </script>
        <script src="./install.js" defer></script>
        <script>
            (function(factory) {
	    if (typeof define === 'function' && define.amd) {
	        define(['jquery', 'hammerjs'], factory);
	    } else if (typeof exports === 'object') {
	        factory(require('jquery'), require('hammerjs'));
	    } else {
	        factory(jQuery, Hammer);
	    }
	}(function($, Hammer) {
	    function hammerify(el, options) {
	        var $el = $(el);
	        if(!$el.data("hammer")) {
	            $el.data("hammer", new Hammer($el[0], options));
	        }
	    }
	    $.fn.hammer = function(options) {
	        return this.each(function() {
	            hammerify(this, options);
	        });
	    };

	    // extend the emit method to also trigger jQuery events
	    Hammer.Manager.prototype.emit = (function(originalEmit) {
	        return function(type, data) {
	            originalEmit.call(this, type, data);
	            $(this.element).trigger({
	                type: type,
	                gesture: data
	            });
	        };
	    })(Hammer.Manager.prototype.emit);
	}));
				</script>
				<div id='app'>
					<div id='calendar'></div>
				</div>
    <script type="text/javascript" src="main.bundle.min.js"></script></body>
</html>
